<!-- Created with Jaspersoft Studio version 7.0.3.final using JasperReports Library version 7.0.3-41034ca841d452f3305ba55b9042260aaa1ab5dd  -->
<jasperReport name="reporte_cuentas_tarjetas" language="java" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="f5a6b7c8-d9e0-41f2-a3b4-c5d6e7f8a9b0">
    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="PostgresBanco"/>
    <property name="com.jaspersoft.studio.unit." value="pixel"/>
    <property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
    <query language="sql"><![CDATA[SELECT
    u.id_usuario AS id_cliente,
    CONCAT(u.nombre, ' ', u.apellidos) AS cliente,
    c.nombre AS tipo_cuenta,
    c.n_cuenta,
    c.saldo,
    tt.tipo AS tipo_tarjeta,
    t.codigo AS numero_tarjeta,
    t.cvc,
    t.fecha_caducidad
FROM cuenta_bancaria c
JOIN t_usuario u ON u.id_usuario = c.id_usuario
LEFT JOIN tarjetas t ON t.id_cuenta = c.id
LEFT JOIN tipo_tarjeta tt ON t.id_tipo = tt.id
ORDER BY cliente]]></query>
    <field name="id_cliente" class="java.lang.Integer"/>
    <field name="cliente" class="java.lang.String"/>
    <field name="tipo_cuenta" class="java.lang.String"/>
    <field name="n_cuenta" class="java.lang.String"/>
    <field name="saldo" class="java.math.BigDecimal"/>
    <field name="tipo_tarjeta" class="java.lang.String"/>
    <field name="numero_tarjeta" class="java.lang.String"/>
    <field name="cvc" class="java.lang.String"/>
    <field name="fecha_caducidad" class="java.sql.Date"/>
    <variable name="total_registros" calculation="Count" class="java.lang.Integer">
        <expression><![CDATA[$F{id_cliente}]]></expression>
        <initialValueExpression><![CDATA[0]]></initialValueExpression>
    </variable>
    <title height="80" splitType="Stretch">
        <element kind="rectangle" uuid="a1b2c3d4-e5f6-47a8-b9c0-d1e2f3a4b5c6" x="0" y="0" width="802" height="80" backcolor="#1A3A5C">
            <pen lineWidth="0.0"/>
        </element>
        <element kind="staticText" uuid="b2c3d4e5-f6a7-48b9-c0d1-e2f3a4b5c6d7" x="20" y="15" width="762" height="30" forecolor="#FFFFFF" fontName="SansSerif" fontSize="22.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
            <text><![CDATA[REPORTE DE CUENTAS Y TARJETAS ASOCIADAS]]></text>
        </element>
        <element kind="staticText" uuid="c3d4e5f6-a7b8-49c0-d1e2-f3a4b5c6d7e8" x="20" y="50" width="762" height="20" forecolor="#E0E0E0" fontName="SansSerif" fontSize="12.0" italic="true" hTextAlign="Center" vTextAlign="Middle">
            <text><![CDATA[Detalle de cuentas bancarias con información de tarjetas vinculadas]]></text>
        </element>
    </title>
    <pageHeader height="35" splitType="Stretch">
        <element kind="textField" uuid="d4e5f6a7-b8c9-40d1-e2f3-a4b5c6d7e8f9" x="0" y="10" width="200" height="20" forecolor="#1A3A5C" fontSize="10.0" pattern="dd/MM/yyyy HH:mm" bold="true" vTextAlign="Middle">
            <expression><![CDATA[new java.util.Date()]]></expression>
        </element>
        <element kind="textField" uuid="e5f6a7b8-c9d0-41e2-f3a4-b5c6d7e8f9a0" x="602" y="10" width="150" height="20" forecolor="#1A3A5C" fontSize="10.0" bold="true" hTextAlign="Right" vTextAlign="Middle">
            <expression><![CDATA["Página " + $V{PAGE_NUMBER}]]></expression>
        </element>
        <element kind="textField" uuid="f6a7b8c9-d0e1-42f3-a4b5-c6d7e8f9a0b1" x="752" y="10" width="50" height="20" forecolor="#1A3A5C" fontSize="10.0" evaluationTime="Report" bold="true" vTextAlign="Middle">
            <expression><![CDATA[" de " + $V{PAGE_NUMBER}]]></expression>
        </element>
        <element kind="line" uuid="a7b8c9d0-e1f2-43a4-b5c6-d7e8f9a0b1c2" x="0" y="32" width="802" height="1" forecolor="#1A3A5C">
            <pen lineWidth="2.0"/>
        </element>
    </pageHeader>
    <columnHeader height="40" splitType="Stretch">
        <element kind="rectangle" uuid="b8c9d0e1-f2a3-44b5-c6d7-e8f9a0b1c2d3" x="0" y="0" width="802" height="40" backcolor="#2C5F8D">
            <pen lineWidth="0.0"/>
        </element>
        <element kind="staticText" uuid="c9d0e1f2-a3b4-45c6-d7e8-f9a0b1c2d3e4" x="5" y="10" width="35" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
            <text><![CDATA[ID]]></text>
        </element>
        <element kind="staticText" uuid="d0e1f2a3-b4c5-46d7-e8f9-a0b1c2d3e4f5" x="45" y="10" width="120" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" vTextAlign="Middle">
            <text><![CDATA[Cliente]]></text>
        </element>
        <element kind="staticText" uuid="e1f2a3b4-c5d6-47e8-f9a0-b1c2d3e4f5a6" x="170" y="10" width="85" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" vTextAlign="Middle">
            <text><![CDATA[Tipo Cuenta]]></text>
        </element>
        <element kind="staticText" uuid="f2a3b4c5-d6e7-48f9-a0b1-c2d3e4f5a6b7" x="260" y="10" width="100" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" vTextAlign="Middle">
            <text><![CDATA[Núm. Cuenta]]></text>
        </element>
        <element kind="staticText" uuid="a3b4c5d6-e7f8-49a0-b1c2-d3e4f5a6b7c8" x="365" y="10" width="80" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" hTextAlign="Right" vTextAlign="Middle">
            <text><![CDATA[Saldo]]></text>
        </element>
        <element kind="staticText" uuid="b4c5d6e7-f8a9-40b1-c2d3-e4f5a6b7c8d9" x="450" y="10" width="90" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" vTextAlign="Middle">
            <text><![CDATA[Tipo Tarjeta]]></text>
        </element>
        <element kind="staticText" uuid="c5d6e7f8-a9b0-41c2-d3e4-f5a6b7c8d9e0" x="545" y="10" width="120" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" vTextAlign="Middle">
            <text><![CDATA[Núm. Tarjeta]]></text>
        </element>
        <element kind="staticText" uuid="d6e7f8a9-b0c1-42d3-e4f5-a6b7c8d9e0f1" x="670" y="10" width="50" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
            <text><![CDATA[CVC]]></text>
        </element>
        <element kind="staticText" uuid="e7f8a9b0-c1d2-43e4-f5a6-b7c8d9e0f1a2" x="725" y="10" width="77" height="20" forecolor="#FFFFFF" fontSize="9.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
            <text><![CDATA[Vencimiento]]></text>
        </element>
    </columnHeader>
    <detail>
        <band height="30" splitType="Stretch">
            <element kind="rectangle" uuid="f8a9b0c1-d2e3-44f5-a6b7-c8d9e0f1a2b3" x="0" y="0" width="802" height="30" backcolor="#F5F5F5">
                <printWhenExpression><![CDATA[$V{REPORT_COUNT} % 2 == 0]]></printWhenExpression>
                <pen lineWidth="0.0"/>
            </element>
            <element kind="textField" uuid="a9b0c1d2-e3f4-45a6-b7c8-d9e0f1a2b3c4" x="5" y="5" width="35" height="20" fontSize="8.0" blankWhenNull="true" hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$F{id_cliente}]]></expression>
            </element>
            <element kind="textField" uuid="b0c1d2e3-f4a5-46b7-c8d9-e0f1a2b3c4d5" x="45" y="5" width="120" height="20" fontSize="8.0" textAdjust="StretchHeight" blankWhenNull="true" vTextAlign="Middle">
                <expression><![CDATA[$F{cliente}]]></expression>
            </element>
            <element kind="textField" uuid="c1d2e3f4-a5b6-47c8-d9e0-f1a2b3c4d5e6" x="170" y="5" width="85" height="20" fontSize="8.0" blankWhenNull="true" vTextAlign="Middle">
                <expression><![CDATA[$F{tipo_cuenta}]]></expression>
            </element>
            <element kind="textField" uuid="d2e3f4a5-b6c7-48d9-e0f1-a2b3c4d5e6f7" x="260" y="5" width="100" height="20" fontSize="8.0" blankWhenNull="true" vTextAlign="Middle">
                <expression><![CDATA[$F{n_cuenta}]]></expression>
            </element>
            <element kind="textField" uuid="e3f4a5b6-c7d8-49e0-f1a2-b3c4d5e6f7a8" x="365" y="5" width="80" height="20" fontSize="8.0" pattern="#,##0.00" blankWhenNull="true" bold="true" hTextAlign="Right" vTextAlign="Middle">
                <expression><![CDATA[$F{saldo}]]></expression>
            </element>
            <element kind="textField" uuid="f4a5b6c7-d8e9-40f1-a2b3-c4d5e6f7a8b9" x="450" y="5" width="90" height="20" fontSize="8.0" blankWhenNull="true" vTextAlign="Middle">
                <expression><![CDATA[$F{tipo_tarjeta} != null ? $F{tipo_tarjeta} : "Sin tarjeta"]]></expression>
            </element>
            <element kind="textField" uuid="a5b6c7d8-e9f0-41a2-b3c4-d5e6f7a8b9c0" x="545" y="5" width="120" height="20" fontSize="8.0" blankWhenNull="true" vTextAlign="Middle">
                <expression><![CDATA[$F{numero_tarjeta} != null ? $F{numero_tarjeta} : "-"]]></expression>
            </element>
            <element kind="textField" uuid="b6c7d8e9-f0a1-42b3-c4d5-e6f7a8b9c0d1" x="670" y="5" width="50" height="20" fontSize="8.0" blankWhenNull="true" hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$F{cvc} != null ? $F{cvc} : "-"]]></expression>
            </element>
            <element kind="textField" uuid="c7d8e9f0-a1b2-43c4-d5e6-f7a8b9c0d1e2" x="725" y="5" width="77" height="20" fontSize="8.0" pattern="MM/yy" blankWhenNull="true" hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$F{fecha_caducidad} != null ? $F{fecha_caducidad} : null]]></expression>
            </element>
            <element kind="line" uuid="d8e9f0a1-b2c3-44d5-e6f7-a8b9c0d1e2f3" x="0" y="28" width="802" height="1" forecolor="#CCCCCC"/>
        </band>
    </detail>
    <columnFooter splitType="Stretch"/>
    <pageFooter height="30" splitType="Stretch">
        <element kind="line" uuid="e9f0a1b2-c3d4-45e6-f7a8-b9c0d1e2f3a4" x="0" y="5" width="802" height="1" forecolor="#1A3A5C"/>
        <element kind="staticText" uuid="f0a1b2c3-d4e5-46f7-a8b9-c0d1e2f3a4b5" x="0" y="10" width="450" height="15" forecolor="#666666" fontSize="8.0" vTextAlign="Middle">
            <text><![CDATA[Sistema Bancario - Cuentas y Tarjetas - Generado con JasperReports 7.0.3]]></text>
        </element>
        <element kind="textField" uuid="a1b2c3d4-e5f6-47a8-b9c0-d1e2f3a4b5c6" x="702" y="10" width="100" height="15" forecolor="#666666" fontSize="8.0" hTextAlign="Right" vTextAlign="Middle">
            <expression><![CDATA["Página " + $V{PAGE_NUMBER}]]></expression>
        </element>
    </pageFooter>
    <summary height="50" splitType="Stretch">
        <element kind="rectangle" uuid="b2c3d4e5-f6a7-48b9-c0d1-e2f3a4b5c6d7" x="0" y="10" width="802" height="35" backcolor="#E8F4F8">
            <pen lineWidth="1.0" lineColor="#1A3A5C"/>
        </element>
        <element kind="staticText" uuid="c3d4e5f6-a7b8-49c0-d1e2-f3a4b5c6d7e8" x="500" y="18" width="150" height="20" forecolor="#1A3A5C" fontSize="11.0" bold="true" hTextAlign="Right" vTextAlign="Middle">
            <text><![CDATA[Total de Registros:]]></text>
        </element>
        <element kind="textField" uuid="d4e5f6a7-b8c9-40d1-e2f3-a4b5c6d7e8f9" x="660" y="18" width="130" height="20" forecolor="#1A3A5C" fontSize="11.0" bold="true" hTextAlign="Right" vTextAlign="Middle">
            <expression><![CDATA[$V{REPORT_COUNT}]]></expression>
        </element>
    </summary>
</jasperReport>